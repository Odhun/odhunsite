<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Odhun FM | Stabil Radyo</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%23f43f5e%22/><text x=%2250%25%22 y=%2255%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Arial%22 font-weight=%22900%22 font-size=%2240%22 fill=%22%23ffffff%22>FM</text></svg>">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Rajdhani:wght@600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
    :root {
        --bg-dark: #0f172a;
        --panel: #1e293b;
        --accent: #f43f5e;
        --text: #fff;
        --border: rgba(255,255,255,0.1);
    }
    * { box-sizing: border-box; }
    body { margin: 0; background: var(--bg-dark); color: var(--text); font-family: 'Inter', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

    /* SIDEBAR */
    .sidebar { width: 260px; background: #020617; border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; }
    .brand { height: 60px; display: flex; align-items: center; padding: 0 20px; font-family: 'Rajdhani', sans-serif; font-size: 1.6rem; border-bottom: 1px solid var(--border); }
    .brand span { color: var(--accent); margin-left: 5px; }
    
    .station-list { flex: 1; overflow-y: auto; padding: 10px; }
    .station-item { padding: 12px 15px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 10px; margin-bottom: 5px; transition: 0.2s; }
    .station-item:hover { background: rgba(255,255,255,0.05); }
    .station-item.active { background: var(--accent); color: #fff; font-weight: bold; }
    .st-icon { width: 30px; height: 30px; border-radius: 4px; object-fit: cover; background: #000; }

    /* MAIN */
    .main { flex: 1; display: flex; flex-direction: column; background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%); position: relative; }
    
    /* Visualizer & Info */
    .screen-area { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; }
    .current-logo { width: 200px; height: 200px; border-radius: 20px; object-fit: cover; box-shadow: 0 0 50px rgba(0,0,0,0.5); margin-bottom: 30px; }
    .current-title { font-size: 2rem; font-weight: 800; margin-bottom: 5px; }
    .current-status { color: var(--accent); font-weight: 600; letter-spacing: 1px; height: 20px; }

    /* Visualizer Bars */
    .visualizer { display: flex; gap: 5px; height: 60px; align-items: flex-end; margin-top: 40px; }
    .bar { width: 8px; background: var(--accent); height: 5px; border-radius: 4px; transition: height 0.1s; }
    .playing .bar { animation: eq 0.8s infinite ease-in-out; }
    @keyframes eq { 0%, 100% { height: 10px; } 50% { height: 50px; } }
    .bar:nth-child(1) { animation-delay: 0s; }
    .bar:nth-child(2) { animation-delay: 0.1s; }
    .bar:nth-child(3) { animation-delay: 0.2s; }
    .bar:nth-child(4) { animation-delay: 0.3s; }
    .bar:nth-child(5) { animation-delay: 0.4s; }

    /* CONTROLS */
    .controls { height: 90px; background: rgba(0,0,0,0.3); border-top: 1px solid var(--border); display: flex; align-items: center; justify-content: center; gap: 30px; backdrop-filter: blur(10px); }
    .ctrl-btn { background: none; border: none; color: #ccc; font-size: 1.5rem; cursor: pointer; transition: 0.2s; }
    .ctrl-btn:hover { color: #fff; }
    .play-btn { width: 50px; height: 50px; border-radius: 50%; background: #fff; color: #000; font-size: 1.5rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(255,255,255,0.2); }
    .play-btn:hover { transform: scale(1.1); background: var(--accent); color: #fff; }
    
    .volume-wrap { position: absolute; right: 30px; display: flex; align-items: center; gap: 10px; }
    input[type=range] { width: 100px; accent-color: var(--accent); cursor: pointer; }

    /* MOBİL */
    @media (max-width: 800px) {
        body { flex-direction: column; }
        .sidebar { width: 100%; height: 40%; border-right: none; border-bottom: 1px solid var(--border); }
        .main { height: 60%; }
        .current-logo { width: 120px; height: 120px; margin-bottom: 15px; }
        .current-title { font-size: 1.5rem; }
        .volume-wrap { display: none; } /* Mobilde ses barını gizle */
    }
</style>
</head>
<body>

    <div style="display:flex; height:100%; flex-direction: row;" id="layout">
        <div class="sidebar">
            <div class="brand"><i class="fas fa-broadcast-tower"></i><span>ODHUN FM</span></div>
            <div class="station-list" id="list"></div>
        </div>

        <div class="main">
            <div class="screen-area" id="screenArea">
                <img src="https://via.placeholder.com/200?text=ODHUN" class="current-logo" id="pLogo">
                <div class="current-title" id="pTitle">Radyo Seçin</div>
                <div class="current-status" id="pStatus">HAZIR</div>

                <div class="visualizer">
                    <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                </div>
            </div>

            <div class="controls">
                <button class="ctrl-btn" onclick="changeVol(-0.1)"><i class="fas fa-volume-down"></i></button>
                <button class="play-btn" onclick="togglePlay()" id="btnPlay"><i class="fas fa-play"></i></button>
                <button class="ctrl-btn" onclick="changeVol(0.1)"><i class="fas fa-volume-up"></i></button>
                
                <div class="volume-wrap">
                    <input type="range" min="0" max="1" step="0.05" value="1" oninput="setVolume(this.value)">
                </div>
            </div>
        </div>
    </div>

    <audio id="audio"></audio>

    <script>
        // --- GÜVENLİ VE ÇALIŞAN RADYO LİSTESİ (HTTPS) ---
        const stations = [
            { name: "Power FM", url: "https://listen.powerapp.com.tr/powerfm/icecast.audio", logo: "https://www.powerapp.com.tr/assets/img/logos/powerfm.png" },
            { name: "Power Turk", url: "https://listen.powerapp.com.tr/powerturk/icecast.audio", logo: "https://www.powerapp.com.tr/assets/img/logos/powerturk.png" },
            { name: "Kral FM", url: "https://ssldyg.radyotvonline.net/smil/kralfm.smil/playlist.m3u8", logo: "https://dogus.daioncdn.net/kralfm/kralfm_web_logo.png" },
            { name: "Süper FM", url: "https://17733.live.streamtheworld.com/SUPER_FM_SC", logo: "https://karnaval.com/media/channels/superfm_180x180.png" },
            { name: "Metro FM", url: "https://17733.live.streamtheworld.com/METRO_FM_SC", logo: "https://karnaval.com/media/channels/metrofm_180x180.png" },
            { name: "Joy Turk", url: "https://17753.live.streamtheworld.com/JOY_TURK_SC", logo: "https://karnaval.com/media/channels/joyturk_180x180.png" },
            { name: "Virgin Radio", url: "https://17703.live.streamtheworld.com/VIRGIN_RADIO_SC", logo: "https://karnaval.com/media/channels/virginradioturkiye_180x180.png" },
            { name: "Fenomen", url: "https://listen.radyofenomen.com/fenomen/128/icecast.audio", logo: "https://radyofenomen.com/assets/img/logo.png" },
            { name: "Number1 FM", url: "https://n10101m.mediatriple.net/videoonlylive/mtkgeuihrlfwlive/u_stream_5c9e3285b5913_1200/playlist.m3u8", logo: "https://www.numberone.com.tr/wp-content/uploads/2019/04/nr1-logo-2019.png" },
            { name: "Alem FM", url: "https://turkmedya-live.ercdn.net/alemfm/alemfm.m3u8", logo: "https://img-alemfm-mncdn.mncdn.com/assets/img/alemfm-logo.png" },
            { name: "TRT FM", url: "https://radios.trt.net.tr/radyofm/master.m3u8", logo: "https://cdn-r.trt.net.tr/static/radio/img/radyofm.png" },
            { name: "Kafa Radyo", url: "https://kafaradyo.artidijitalmedya.com/kafaradyo", logo: "https://kafaradyo.com/assets/img/logo.png" }
        ];

        const audio = document.getElementById('audio');
        const listEl = document.getElementById('list');
        const pTitle = document.getElementById('pTitle');
        const pStatus = document.getElementById('pStatus');
        const pLogo = document.getElementById('pLogo');
        const btnPlay = document.getElementById('btnPlay');
        const screenArea = document.getElementById('screenArea');
        
        let hls = null;
        let isPlaying = false;
        let currentIndex = -1;

        // --- RENDER ---
        stations.forEach((s, i) => {
            const item = document.createElement('div');
            item.className = 'station-item';
            item.onclick = () => playStation(i);
            item.innerHTML = `
                <img src="${s.logo}" class="st-icon" onerror="this.src='https://via.placeholder.com/30?text=R'">
                <span>${s.name}</span>
            `;
            listEl.appendChild(item);
        });

        // --- PLAYER ---
        function playStation(index) {
            currentIndex = index;
            const s = stations[index];

            // UI Güncelle
            pTitle.innerText = s.name;
            pLogo.src = s.logo;
            pStatus.innerText = "BAĞLANIYOR...";
            pStatus.style.color = "#fff";
            
            // Listeyi güncelle
            document.querySelectorAll('.station-item').forEach((el, i) => {
                el.classList.toggle('active', i === index);
            });

            // Oynatıcıyı sıfırla
            if (hls) { hls.destroy(); hls = null; }
            screenArea.classList.remove('playing');
            
            // HLS Kontrolü (.m3u8 ise HLS kullan, değilse direkt)
            if (Hls.isSupported() && s.url.includes('.m3u8')) {
                hls = new Hls();
                hls.loadSource(s.url);
                hls.attachMedia(audio);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    audio.play().catch(e => showError(e));
                });
                hls.on(Hls.Events.ERROR, (e, data) => {
                    if(data.fatal) showError("HLS Hatası");
                });
            } else {
                audio.src = s.url;
                audio.play().catch(e => showError(e));
            }
        }

        // Event Listeners
        audio.onplaying = () => {
            isPlaying = true;
            pStatus.innerText = "CANLI YAYIN";
            pStatus.style.color = "var(--accent)";
            btnPlay.innerHTML = '<i class="fas fa-pause"></i>';
            screenArea.classList.add('playing');
        };

        audio.onpause = () => {
            isPlaying = false;
            pStatus.innerText = "DURAKLATILDI";
            pStatus.style.color = "#aaa";
            btnPlay.innerHTML = '<i class="fas fa-play"></i>';
            screenArea.classList.remove('playing');
        };

        audio.onerror = () => showError("Bağlantı Hatası");

        function togglePlay() {
            if(currentIndex === -1) { playStation(0); return; }
            if(audio.paused) audio.play();
            else audio.pause();
        }

        function setVolume(val) { audio.volume = val; }
        function changeVol(delta) {
            let newVol = audio.volume + delta;
            if(newVol > 1) newVol = 1;
            if(newVol < 0) newVol = 0;
            audio.volume = newVol;
            document.querySelector('input[type=range]').value = newVol;
        }

        function showError(msg) {
            console.error(msg);
            pStatus.innerText = "YAYIN ALINAMIYOR";
            pStatus.style.color = "red";
            screenArea.classList.remove('playing');
        }

        // Mobil Uyum Kontrolü (Ekran boyutu değişirse)
        function checkLayout() {
            const layout = document.getElementById('layout');
            if(window.innerWidth <= 800) {
                layout.style.flexDirection = 'column';
            } else {
                layout.style.flexDirection = 'row';
            }
        }
        window.onresize = checkLayout;
        checkLayout(); // Başlangıçta çalıştır

    </script>
</body>
</html>
