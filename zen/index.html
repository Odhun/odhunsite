<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Odhun Zen | Odaklanma</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%23000000%22/><text x=%2250%25%22 y=%2255%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Arial%22 font-weight=%22900%22 font-size=%2240%22 fill=%22%23ffffff%22>O<tspan fill=%22%2300e5ff%22>Z</tspan></text></svg>">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

<style>
    :root {
        --bg: #050505;
        --card-bg: #121212;
        --accent: #00e5ff;
        --accent-dim: rgba(0, 229, 255, 0.15);
        --text: #f0f0f0;
        --text-dim: #888;
        --border: #222;
    }

    * { box-sizing: border-box; scrollbar-width: thin; scrollbar-color: #333 #000; }

    body {
        margin: 0; padding: 0; background: var(--bg); color: var(--text);
        font-family: 'Inter', sans-serif; height: 100vh; display: flex; overflow: hidden;
    }

    /* BAŞLANGIÇ PERDESİ */
    #startOverlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.95); z-index: 9999;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        backdrop-filter: blur(10px); transition: opacity 0.5s;
    }
    #startBtn {
        padding: 20px 60px; font-size: 1.5rem; background: var(--accent);
        color: #000; border: none; border-radius: 50px; font-weight: 800;
        cursor: pointer; box-shadow: 0 0 40px var(--accent-dim);
        transition: transform 0.2s; text-transform: uppercase; letter-spacing: 2px;
    }
    #startBtn:hover { transform: scale(1.05); }

    /* SIDEBAR */
    .sidebar {
        width: 280px; background: #080808; border-right: 1px solid var(--border);
        display: flex; flex-direction: column; flex-shrink: 0; z-index: 100;
        transition: transform 0.3s ease;
    }

    .brand {
        height: 80px; display: flex; align-items: center; padding: 0 25px;
        font-family: 'Rajdhani', sans-serif; font-size: 2rem; font-weight: 700;
        letter-spacing: 1px; border-bottom: 1px solid var(--border);
    }
    .brand span { color: var(--accent); margin-left: 4px; }

    .preset-list { flex: 1; overflow-y: auto; padding: 20px; }
    .preset-title { font-size: 0.75rem; text-transform: uppercase; color: var(--text-dim); font-weight: 800; margin-bottom: 15px; letter-spacing: 1px; }
    
    .preset-item {
        background: var(--card-bg); border: 1px solid var(--border);
        padding: 15px; border-radius: 10px; margin-bottom: 10px; cursor: pointer;
        display: flex; align-items: center; gap: 15px; transition: all 0.2s;
    }
    .preset-item:hover { border-color: var(--accent); background: rgba(255,255,255,0.02); }
    .preset-item.active { border-color: var(--accent); background: var(--accent-dim); }
    
    .preset-icon { width: 40px; height: 40px; border-radius: 8px; background: #222; display: flex; align-items: center; justify-content: center; color: var(--text); font-size: 1.2rem; }
    .preset-info h4 { margin: 0; font-size: 0.95rem; }
    .preset-info p { margin: 3px 0 0; font-size: 0.75rem; color: var(--text-dim); }

    .master-controls { padding: 20px; border-top: 1px solid var(--border); background: #0a0a0a; }
    .stop-btn { width: 100%; padding: 12px; background: #222; color: #ff4444; border: 1px solid #333; border-radius: 8px; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; }

    /* MAIN */
    .main { flex: 1; display: flex; flex-direction: column; position: relative; }

    /* TIMER */
    .timer-section {
        height: 320px; background: radial-gradient(circle at center, rgba(255,255,255,0.03) 0%, transparent 70%);
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        border-bottom: 1px solid var(--border); position: relative; flex-shrink: 0;
    }
    .timer-display {
        font-family: 'Rajdhani', sans-serif; font-size: 8rem; font-weight: 500; 
        line-height: 1; margin: 20px 0; font-variant-numeric: tabular-nums;
        text-shadow: 0 0 30px rgba(255,255,255,0.1); letter-spacing: 5px;
    }
    .timer-tabs { display: flex; gap: 5px; background: #1a1a1a; padding: 4px; border-radius: 30px; border: 1px solid #333; }
    .timer-tab { padding: 8px 20px; border-radius: 25px; cursor: pointer; font-size: 0.85rem; color: #aaa; font-weight: 600; transition: 0.2s; }
    .timer-tab.active { background: var(--accent); color: #000; }
    
    .timer-actions { display: flex; gap: 15px; }
    .t-btn { width: 50px; height: 50px; border-radius: 50%; border: 2px solid #444; background: transparent; color: #fff; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
    .t-btn.play { width: 70px; height: 70px; border-color: var(--accent); color: var(--accent); font-size: 1.8rem; }

    /* SOUND BOARD */
    .sound-container { flex: 1; overflow-y: auto; padding: 30px 40px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; }

    .sound-btn {
        background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px;
        padding: 20px; text-align: center; cursor: pointer; transition: all 0.2s;
        position: relative; height: 160px; display: flex; flex-direction: column; 
        align-items: center; justify-content: center;
    }
    .sound-btn:hover { transform: translateY(-3px); border-color: #444; }
    .sound-btn.active { border-color: var(--accent); background: rgba(0,229,255,0.05); box-shadow: inset 0 0 20px rgba(0,229,255,0.05); }
    
    .s-icon { font-size: 2.5rem; margin-bottom: 15px; color: #555; transition: 0.3s; }
    .sound-btn.active .s-icon { color: var(--accent); transform: scale(1.1); text-shadow: 0 0 15px var(--accent); }
    .s-name { font-size: 0.9rem; font-weight: 600; color: #ccc; }

    /* VOLUME SLIDER */
    .vol-slider {
        width: 80%; height: 4px; background: #333; border-radius: 2px; margin-top: 15px;
        position: relative; opacity: 0; transform: translateY(10px); transition: 0.3s;
    }
    .sound-btn.active .vol-slider { opacity: 1; transform: translateY(0); }
    .vol-fill { height: 100%; background: var(--accent); border-radius: 2px; width: 50%; position: relative; pointer-events: none;}
    .vol-knob { width: 10px; height: 10px; background: #fff; border-radius: 50%; position: absolute; right: -5px; top: -3px; box-shadow: 0 0 5px rgba(0,0,0,0.5); }

    /* MOBILE */
    .mobile-toggle { display: none; position: absolute; top: 20px; left: 20px; background:none; border:none; color:#fff; font-size:1.5rem; z-index:200; cursor:pointer;}
    
    @media (max-width: 900px) {
        .sidebar { position: fixed; left: -100%; height: 100%; box-shadow: 10px 0 30px #000; }
        .sidebar.active { left: 0; }
        .mobile-toggle { display: block; }
        .timer-display { font-size: 5rem; }
        .grid { grid-template-columns: repeat(2, 1fr); }
        .sound-container { padding: 20px; }
    }
</style>
</head>
<body>

    <div id="startOverlay">
        <div style="text-align:center;">
            <i class="fas fa-headphones-alt" style="font-size:4rem; color:var(--accent); margin-bottom:20px;"></i>
            <h1 style="margin-bottom:10px; font-family:'Rajdhani'; font-size:3rem;">ODHUN ZEN</h1>
            <p style="color:#aaa; margin-bottom:40px; font-size:1.1rem;">Odaklanma ve rahatlama için ses evreni.</p>
            <button id="startBtn" onclick="initApp()">BAŞLA</button>
        </div>
    </div>

    <button class="mobile-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>

    <div class="sidebar" id="sidebar">
        <div class="brand">ODHUN<span>ZEN</span></div>
        
        <div class="preset-list">
            <div class="preset-title">Hazır Modlar</div>
            <div class="preset-item" onclick="loadPreset('focus')">
                <div class="preset-icon"><i class="fas fa-brain"></i></div>
                <div class="preset-info"><h4>Derin Odak</h4><p>Yağmur + Kahve</p></div>
            </div>
            <div class="preset-item" onclick="loadPreset('sleep')">
                <div class="preset-icon"><i class="fas fa-moon"></i></div>
                <div class="preset-info"><h4>Uyku</h4><p>Gece + Rüzgar</p></div>
            </div>
            <div class="preset-item" onclick="loadPreset('nature')">
                <div class="preset-icon"><i class="fas fa-leaf"></i></div>
                <div class="preset-info"><h4>Doğa</h4><p>Kuşlar + Nehir</p></div>
            </div>
        </div>

        <div class="master-controls">
            <button class="stop-btn" onclick="stopAll()"><i class="fas fa-stop"></i> TÜM SESLERİ DURDUR</button>
        </div>
    </div>

    <div class="main">
        <div class="timer-section">
            <div class="timer-tabs">
                <div class="timer-tab active" onclick="setTimerMode(25, this)">Pomodoro</div>
                <div class="timer-tab" onclick="setTimerMode(5, this)">Kısa Mola</div>
                <div class="timer-tab" onclick="setTimerMode(15, this)">Uzun Mola</div>
            </div>
            <div class="timer-display" id="timerDisplay">25:00</div>
            <div class="timer-actions">
                <button class="t-btn" onclick="resetTimer()"><i class="fas fa-redo"></i></button>
                <button class="t-btn play" id="playBtn" onclick="toggleTimer()"><i class="fas fa-play"></i></button>
            </div>
        </div>

        <div class="sound-container">
            <div class="grid" id="soundGrid"></div>
        </div>
    </div>

    <script>
        // --- KESİN ÇALIŞAN MP3 LİNKLERİ (GITHUB CDN) ---
        const soundDB = [
            { id: 'rain', name: 'Yağmur', icon: 'fa-cloud-rain', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/rain.mp3' },
            { id: 'thunder', name: 'Fırtına', icon: 'fa-bolt', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/thunder.mp3' },
            { id: 'fire', name: 'Kamp Ateşi', icon: 'fa-fire', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/fireplace.mp3' },
            { id: 'wind', name: 'Rüzgar', icon: 'fa-wind', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/wind.mp3' },
            { id: 'night', name: 'Gece', icon: 'fa-moon', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/night.mp3' },
            { id: 'birds', name: 'Kuşlar', icon: 'fa-dove', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/birds.mp3' },
            { id: 'ocean', name: 'Dalgalar', icon: 'fa-water', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/ocean.mp3' },
            { id: 'coffee', name: 'Kafe', icon: 'fa-coffee', url: 'https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/coffee-shop.mp3' },
            { id: 'train', name: 'Tren', icon: 'fa-subway', url: 'https://cdn.jsdelivr.net/gh/remvze/moodist@main/public/sounds/train.mp3' },
            { id: 'white', name: 'Beyaz Gürültü', icon: 'fa-snowflake', url: 'https://cdn.jsdelivr.net/gh/remvze/moodist@main/public/sounds/white-noise.mp3' },
            { id: 'river', name: 'Nehir', icon: 'fa-water', url: 'https://cdn.jsdelivr.net/gh/remvze/moodist@main/public/sounds/river.mp3' },
            { id: 'keyboard', name: 'Klavye', icon: 'fa-keyboard', url: 'https://cdn.jsdelivr.net/gh/remvze/moodist@main/public/sounds/keyboard.mp3' }
        ];

        const audioMap = {};

        function initApp() {
            document.getElementById('startOverlay').style.opacity = '0';
            setTimeout(() => document.getElementById('startOverlay').style.display = 'none', 500);
            renderSounds();
        }

        function renderSounds() {
            const grid = document.getElementById('soundGrid');
            grid.innerHTML = "";
            
            soundDB.forEach(s => {
                // Audio Nesnesi
                const audio = new Audio();
                audio.src = s.url;
                audio.loop = true;
                audio.volume = 0.5;
                audioMap[s.id] = audio;

                // Kart
                const card = document.createElement('div');
                card.className = 'sound-btn';
                card.id = `btn-${s.id}`;
                card.innerHTML = `
                    <i class="s-icon fas ${s.icon}"></i>
                    <div class="s-name">${s.name}</div>
                    <div class="vol-slider" onclick="event.stopPropagation()" onmousedown="startDrag('${s.id}', event)" ontouchstart="startDrag('${s.id}', event)">
                        <div class="vol-fill" id="fill-${s.id}" style="width:50%"></div>
                        <div class="vol-knob" id="knob-${s.id}" style="left:50%"></div>
                    </div>
                `;
                card.onclick = (e) => toggleSound(s.id);
                grid.appendChild(card);
            });
        }

        function toggleSound(id) {
            const audio = audioMap[id];
            const btn = document.getElementById(`btn-${id}`);
            
            if (audio.paused) {
                audio.play().catch(e => console.log(e)); // Hata yakalama
                btn.classList.add('active');
            } else {
                audio.pause();
                btn.classList.remove('active');
            }
        }

        function setVolume(id, percent) {
            const audio = audioMap[id];
            if(audio) audio.volume = percent;
            
            const fill = document.getElementById(`fill-${id}`);
            const knob = document.getElementById(`knob-${id}`);
            if(fill && knob) {
                fill.style.width = (percent * 100) + '%';
                knob.style.left = (percent * 100) + '%';
            }
        }

        function stopAll() {
            for (let key in audioMap) {
                audioMap[key].pause();
                audioMap[key].currentTime = 0;
                document.getElementById(`btn-${key}`).classList.remove('active');
            }
            if (window.innerWidth <= 900) toggleSidebar();
        }

        // --- MODLAR ---
        function loadPreset(type) {
            stopAll();
            const presets = {
                'focus': [ {id:'rain', v:0.4}, {id:'coffee', v:0.3} ],
                'sleep': [ {id:'night', v:0.6}, {id:'wind', v:0.3} ],
                'nature': [ {id:'birds', v:0.4}, {id:'river', v:0.5} ]
            };
            const selected = presets[type];
            if(selected) {
                selected.forEach(item => {
                    setVolume(item.id, item.v);
                    toggleSound(item.id);
                });
            }
        }

        // --- TIMER ---
        let timerInt;
        let timeLeft = 25 * 60;
        let isRunning = false;

        function setTimerMode(min, btn) {
            document.querySelectorAll('.timer-tab').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');
            stopTimer();
            timeLeft = min * 60;
            updateTimerDisplay();
        }

        function toggleTimer() {
            const btn = document.getElementById('playBtn');
            if(isRunning) {
                stopTimer();
            } else {
                isRunning = true;
                btn.innerHTML = '<i class="fas fa-pause"></i>';
                timerInt = setInterval(() => {
                    if(timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        stopTimer();
                        new Audio('https://cdn.jsdelivr.net/gh/bradtraversy/ambient-sound-mixer@main/sounds/bell.mp3').play();
                        alert("Süre Doldu!");
                    }
                }, 1000);
            }
        }

        function stopTimer() {
            clearInterval(timerInt);
            isRunning = false;
            document.getElementById('playBtn').innerHTML = '<i class="fas fa-play"></i>';
        }

        function resetTimer() {
            stopTimer();
            const activeTab = document.querySelector('.timer-tab.active');
            let min = 25;
            if(activeTab.innerText.includes('Kısa')) min = 5;
            if(activeTab.innerText.includes('Uzun')) min = 15;
            timeLeft = min * 60;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            const s = (timeLeft % 60).toString().padStart(2, '0');
            document.getElementById('timerDisplay').innerText = `${m}:${s}`;
            document.title = `(${m}:${s}) Odhun Zen`;
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        // SLIDER DRAG LOGIC
        function startDrag(id, e) {
            e.preventDefault();
            const slider = e.currentTarget;
            
            const update = (evt) => {
                const rect = slider.getBoundingClientRect();
                let clientX = evt.touches ? evt.touches[0].clientX : evt.clientX;
                let percent = (clientX - rect.left) / rect.width;
                percent = Math.max(0, Math.min(1, percent));
                setVolume(id, percent);
            };

            const stop = () => {
                document.removeEventListener('mousemove', update);
                document.removeEventListener('mouseup', stop);
                document.removeEventListener('touchmove', update);
                document.removeEventListener('touchend', stop);
            };

            document.addEventListener('mousemove', update);
            document.addEventListener('mouseup', stop);
            document.addEventListener('touchmove', update);
            document.addEventListener('touchend', stop);
            update(e);
        }
    </script>
</body>
</html>
