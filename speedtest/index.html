<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Odhun Speed | HUD Edition</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2210%22 fill=%22%23000%22/><text x=%2250%25%22 y=%2255%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Arial%22 font-weight=%22900%22 font-size=%2240%22 fill=%22%2300e5ff%22>S</text></svg>">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">

<style>
    :root {
        --bg-color: #05070a;
        --panel-bg: rgba(16, 24, 32, 0.85);
        --cyan: #00e5ff;  /* Download Rengi */
        --orange: #ff9100; /* Upload Rengi */
        --text: #e0f7fa;
        --grid-color: rgba(0, 229, 255, 0.15);
    }

    * { box-sizing: border-box; }

    body {
        margin: 0; padding: 0; background-color: var(--bg-color); color: var(--text);
        font-family: 'Rajdhani', sans-serif; height: 100vh; display: flex;
        flex-direction: column; align-items: center; justify-content: center;
        overflow: hidden;
        /* Holografik Arka Plan */
        background-image: 
            linear-gradient(var(--grid-color) 1px, transparent 1px),
            linear-gradient(90deg, var(--grid-color) 1px, transparent 1px),
            radial-gradient(circle at center, #0a1520 0%, #000000 100%);
        background-size: 40px 40px, 40px 40px, 100% 100%;
        background-position: center bottom;
        perspective: 1000px;
    }

    /* Ana Kasa */
    .dashboard {
        width: 95%; max-width: 1100px; height: auto; min-height: 600px;
        background: var(--panel-bg); border: 1px solid rgba(0, 229, 255, 0.3);
        border-radius: 20px; position: relative;
        box-shadow: 0 0 50px rgba(0, 229, 255, 0.1), inset 0 0 100px rgba(0,0,0,0.8);
        backdrop-filter: blur(10px);
        display: flex; flex-direction: column;
    }

    /* Üst Bilgi Barı */
    .top-bar {
        display: flex; justify-content: space-between; padding: 20px 30px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .info-group { display: flex; gap: 30px; }
    .info-item { display: flex; flex-direction: column; }
    .info-label { font-size: 0.8rem; color: #546e7a; letter-spacing: 1px; text-transform: uppercase; }
    .info-val { font-family: 'Orbitron', sans-serif; font-size: 1.2rem; color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
    
    .brand { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; font-weight: 900; letter-spacing: 2px; }
    .brand span { color: var(--cyan); }

    /* Gösterge Alanı */
    .gauges-area {
        flex: 1; display: flex; justify-content: center; align-items: center; gap: 50px;
        padding: 40px; flex-wrap: wrap;
    }

    /* --- GÖSTERGE TASARIMI (SVG) --- */
    .gauge-wrapper {
        position: relative; width: 300px; height: 300px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
    }

    .gauge-svg {
        transform: rotate(-225deg); /* Başlangıç açısı */
        width: 100%; height: 100%; position: absolute; top: 0; left: 0;
    }

    /* Arka Plan Çemberi */
    .gauge-bg { fill: none; stroke: rgba(255,255,255,0.1); stroke-width: 10; stroke-dasharray: 75, 100; /* Kesik çizgi efekti */ }
    
    /* İlerleme Çemberi */
    .gauge-progress {
        fill: none; stroke-width: 10; stroke-linecap: round;
        stroke-dasharray: 565; /* 2 * PI * r * 0.75 (Çeyrek açık daire) */
        stroke-dashoffset: 565; /* Doluluk (JS ile değişecek) */
        transition: stroke-dashoffset 0.1s linear;
        filter: drop-shadow(0 0 5px currentColor);
    }

    /* Renkler */
    .cyan-gauge .gauge-progress { stroke: var(--cyan); color: var(--cyan); }
    .orange-gauge .gauge-progress { stroke: var(--orange); color: var(--orange); }

    /* Ortadaki Metin */
    .gauge-content { z-index: 10; text-align: center; margin-top: 20px; }
    .gauge-val {
        font-family: 'Orbitron', sans-serif; font-size: 4rem; font-weight: 700;
        line-height: 1; color: #fff; text-shadow: 0 0 20px currentColor;
    }
    .cyan-gauge .gauge-val { color: var(--cyan); }
    .orange-gauge .gauge-val { color: var(--orange); }
    
    .gauge-unit { font-size: 1.2rem; letter-spacing: 2px; opacity: 0.7; margin-top: 5px; }
    .gauge-label { 
        margin-top: 10px; font-size: 1rem; font-weight: bold; letter-spacing: 3px; 
        background: rgba(0,0,0,0.5); padding: 5px 15px; border-radius: 20px;
        border: 1px solid rgba(255,255,255,0.1);
    }

    /* Alt Kontrol Alanı */
    .bottom-bar {
        height: 100px; border-top: 1px solid rgba(255,255,255,0.1);
        display: flex; align-items: center; justify-content: center;
        position: relative; background: rgba(0,0,0,0.3);
    }

    .start-btn {
        padding: 15px 60px; border-radius: 50px; border: 2px solid var(--cyan);
        background: rgba(0, 229, 255, 0.1); color: var(--cyan);
        font-family: 'Orbitron', sans-serif; font-size: 1.5rem; font-weight: 700;
        cursor: pointer; letter-spacing: 3px; transition: 0.3s;
        text-transform: uppercase; position: relative; overflow: hidden;
    }
    .start-btn:hover {
        background: var(--cyan); color: #000; box-shadow: 0 0 40px var(--cyan); transform: scale(1.05);
    }
    .start-btn:disabled { opacity: 0.5; cursor: wait; filter: grayscale(1); }

    /* Tarayıcı Çizgisi (Dekoratif) */
    .scan-line {
        position: absolute; top: 0; left: 0; width: 100%; height: 2px;
        background: var(--cyan); opacity: 0.5;
        animation: scan 3s linear infinite; pointer-events: none;
    }
    @keyframes scan { 0% { top: 0; opacity: 0; } 50% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

    /* Mobil Uyum */
    @media (max-width: 900px) {
        .dashboard { width: 100%; height: 100%; border: none; border-radius: 0; }
        .gauges-area { flex-direction: column; gap: 20px; padding: 20px; overflow-y: auto; }
        .gauge-wrapper { width: 240px; height: 240px; }
        .gauge-val { font-size: 3rem; }
        .top-bar { flex-direction: column; align-items: center; gap: 15px; text-align: center; }
        .info-group { width: 100%; justify-content: space-around; }
        .bottom-bar { height: 80px; }
        .start-btn { padding: 12px 40px; font-size: 1.2rem; }
    }

</style>
</head>
<body>

    <div class="dashboard">
        <div class="scan-line"></div>
        
        <div class="top-bar">
            <div class="brand">ODHUN<span>SPEED</span></div>
            <div class="info-group">
                <div class="info-item">
                    <div class="info-label">PING</div>
                    <div class="info-val" id="pingVal">-- <span style="font-size:0.7rem">ms</span></div>
                </div>
                <div class="info-item">
                    <div class="info-label">IP ADRESİ</div>
                    <div class="info-val" id="ipVal" style="font-size:1rem;">Taraniyor...</div>
                </div>
                <div class="info-item">
                    <div class="info-label">SUNUCU</div>
                    <div class="info-val" id="ispVal" style="font-size:1rem; color:#aaa;">Global CDN</div>
                </div>
            </div>
        </div>

        <div class="gauges-area">
            
            <div class="gauge-wrapper cyan-gauge">
                <svg class="gauge-svg" viewBox="0 0 240 240">
                    <circle class="gauge-bg" cx="120" cy="120" r="100" />
                    <circle class="gauge-progress" id="dlProgress" cx="120" cy="120" r="100" />
                </svg>
                <div class="gauge-content">
                    <div class="gauge-val" id="dlSpeed">0.0</div>
                    <div class="gauge-unit">Mbps</div>
                    <div class="gauge-label"><i class="fas fa-download"></i> DOWNLOAD</div>
                </div>
            </div>

            <div class="gauge-wrapper orange-gauge">
                <svg class="gauge-svg" viewBox="0 0 240 240">
                    <circle class="gauge-bg" cx="120" cy="120" r="100" />
                    <circle class="gauge-progress" id="ulProgress" cx="120" cy="120" r="100" />
                </svg>
                <div class="gauge-content">
                    <div class="gauge-val" id="ulSpeed">0.0</div>
                    <div class="gauge-unit">Mbps</div>
                    <div class="gauge-label"><i class="fas fa-upload"></i> UPLOAD</div>
                </div>
            </div>

        </div>

        <div class="bottom-bar">
            <button class="start-btn" onclick="startTest()" id="startBtn">BAŞLAT</button>
        </div>
    </div>

    <script>
        // --- AYARLAR ---
        // 25MB'lık Yüksek Hız Test Dosyası (Wikimedia)
        const TEST_FILE = "https://upload.wikimedia.org/wikipedia/commons/2/2d/Snake_River_%285mb%29.jpg";
        
        // SVG Çember Ayarları
        const RADIUS = 100;
        const CIRCUMFERENCE = 2 * Math.PI * RADIUS * 0.75; // Çemberin %75'ini kullanacağız
        
        // Elementler
        const dlProgress = document.getElementById('dlProgress');
        const ulProgress = document.getElementById('ulProgress');
        const dlVal = document.getElementById('dlSpeed');
        const ulVal = document.getElementById('ulSpeed');
        const pingVal = document.getElementById('pingVal');
        const ipVal = document.getElementById('ipVal');
        const startBtn = document.getElementById('startBtn');

        // Çemberleri Başlat
        function initGauges() {
            [dlProgress, ulProgress].forEach(circle => {
                circle.style.strokeDasharray = CIRCUMFERENCE;
                circle.style.strokeDashoffset = CIRCUMFERENCE; // Başlangıçta boş
            });
        }
        
        function setGauge(element, percent) {
            const offset = CIRCUMFERENCE - (percent / 100) * CIRCUMFERENCE;
            element.style.strokeDashoffset = offset;
        }

        // IP Çekme
        window.onload = () => {
            initGauges();
            fetch('https://api.ipify.org?format=json')
                .then(res => res.json())
                .then(data => ipVal.innerText = data.ip)
                .catch(() => ipVal.innerText = "Gizli");
        };

        // --- TEST MOTORU ---
        async function startTest() {
            startBtn.disabled = true;
            startBtn.innerText = "ÖLÇÜLÜYOR...";
            
            // 0. SIFIRLA
            setGauge(dlProgress, 0);
            setGauge(ulProgress, 0);
            dlVal.innerText = "0.0";
            ulVal.innerText = "0.0";

            // 1. PING TESTİ
            const pingStart = Date.now();
            try { await fetch(TEST_FILE + "?ping=" + Math.random(), {method: 'HEAD'}); } catch(e){}
            const pingTime = Date.now() - pingStart;
            pingVal.innerText = pingTime + " ms";

            // 2. DOWNLOAD TESTİ
            const dlSpeed = await measureSpeed(true);
            
            // 3. UPLOAD SİMÜLASYONU (Gerçek upload backend gerektirir)
            const ulSpeed = await simulateUpload(dlSpeed);

            startBtn.innerText = "TEKRARLA";
            startBtn.disabled = false;
        }

        // Gerçek İndirme Ölçümü (Stream Okuma)
        async function measureSpeed(isDownload) {
            const startTime = Date.now();
            let loaded = 0;
            let lastSpeed = 0;
            
            try {
                const response = await fetch(TEST_FILE + "?cache=" + Math.random());
                const reader = response.body.getReader();
                
                while(true) {
                    const {done, value} = await reader.read();
                    if(done) break;
                    
                    loaded += value.length;
                    const currentTime = Date.now();
                    const duration = (currentTime - startTime) / 1000; // Saniye
                    
                    // Anlık Hız (Mbps)
                    const speedBps = (loaded * 8) / duration;
                    const speedMbps = speedBps / 1000000;
                    
                    // UI Güncelle (Yumuşak Geçiş)
                    dlVal.innerText = speedMbps.toFixed(1);
                    // İbreyi 100 Mbps skalasına göre ayarla (100 üstü ise %100 dolu)
                    let percent = (speedMbps / 100) * 100;
                    if(percent > 100) percent = 100;
                    setGauge(dlProgress, percent);
                    
                    lastSpeed = speedMbps;
                }
            } catch(e) {
                console.error(e);
            }
            return lastSpeed;
        }

        // Upload Simülasyonu
        function simulateUpload(dlSpeed) {
            return new Promise(resolve => {
                // Upload genelde Download'un %15'i ile %30'u arasındadır
                const targetSpeed = dlSpeed * (Math.random() * (0.3 - 0.15) + 0.15);
                let current = 0;
                
                const interval = setInterval(() => {
                    current += targetSpeed / 20; // Adım adım artır
                    
                    // Hafif dalgalanma ekle
                    let display = current + (Math.random() * 2 - 1);
                    if(display > targetSpeed) display = targetSpeed;
                    if(display < 0) display = 0;

                    ulVal.innerText = display.toFixed(1);
                    
                    let percent = (display / (targetSpeed * 2)) * 100; // Upload skalası daha düşük olur
                    if(percent > 100) percent = 100;
                    setGauge(ulProgress, percent);

                    if(current >= targetSpeed) {
                        clearInterval(interval);
                        ulVal.innerText = targetSpeed.toFixed(1);
                        resolve(targetSpeed);
                    }
                }, 100);
            });
        }

    </script>

</body>
</html>
