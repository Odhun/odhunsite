<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Odhun Tools | Pro Araçlar</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%23000000%22/><text x=%2250%25%22 y=%2255%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Arial%22 font-weight=%22900%22 font-size=%2240%22 fill=%22%23ffa500%22>O<tspan fill=%22%23ffffff%22>T</tspan></text></svg>">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>

<style>
    :root {
        --bg-dark: #050505;
        --panel-bg: #111111;
        --accent: #ffa500; /* Tools Turuncusu */
        --border: #333;
        --text-main: #ffffff;
        --text-dim: #aaa;
        --sidebar-width: 260px;
    }

    * { box-sizing: border-box; }

    body {
        margin: 0; padding: 0; background-color: var(--bg-dark); color: var(--text-main);
        font-family: 'Inter', sans-serif; height: 100vh; display: flex; overflow: hidden;
    }

    /* SIDEBAR */
    .sidebar {
        width: var(--sidebar-width); background: var(--panel-bg);
        border-right: 1px solid var(--border); display: flex; flex-direction: column;
        flex-shrink: 0; z-index: 100;
    }

    .logo-area {
        height: 70px; display: flex; align-items: center; padding: 0 25px;
        font-size: 1.5rem; font-weight: 900; border-bottom: 1px solid var(--border);
        letter-spacing: -1px;
    }
    .logo-area span { color: var(--accent); margin-left: 2px; }

    .menu-list { padding: 20px; flex: 1; overflow-y: auto; }
    .menu-list::-webkit-scrollbar { width: 5px; }
    .menu-list::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }

    .menu-group-title {
        font-size: 0.75rem; text-transform: uppercase; color: #666; font-weight: 800;
        margin: 15px 0 8px 5px; letter-spacing: 1px;
    }

    .menu-item {
        display: flex; align-items: center; gap: 15px; padding: 12px 15px;
        color: var(--text-dim); text-decoration: none; font-weight: 500; font-size: 0.9rem;
        border-radius: 8px; margin-bottom: 4px; cursor: pointer; transition: 0.2s;
    }
    .menu-item:hover, .menu-item.active { background: #1a1a1a; color: #fff; }
    .menu-item.active { border-left: 4px solid var(--accent); font-weight: 700; }
    .menu-item i { width: 20px; text-align: center; }

    /* MAIN CONTENT */
    .main-content {
        flex: 1; display: flex; flex-direction: column; height: 100%; 
        overflow-y: auto; position: relative; background: #080808;
    }

    .tool-container {
        max-width: 900px; margin: 0 auto; padding: 40px; width: 100%; display: none;
        animation: fadeIn 0.3s ease; padding-bottom: 100px;
    }
    .tool-container.active { display: block; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    h2 { font-size: 2rem; margin-bottom: 10px; color: #fff; border-bottom: 1px solid #222; padding-bottom: 15px; }
    p.desc { color: #666; margin-bottom: 30px; }

    /* FORM ELEMENTLERİ */
    .input-group { margin-bottom: 15px; }
    label { display: block; margin-bottom: 8px; color: #ccc; font-weight: 600; font-size: 0.85rem; }
    
    input[type="text"], input[type="number"], textarea, select {
        width: 100%; background: #1a1a1a; border: 1px solid #333; color: #fff;
        padding: 12px; border-radius: 8px; outline: none; font-family: inherit; font-size: 0.95rem;
        transition: 0.3s;
    }
    input[type="text"]:focus, textarea:focus, select:focus { border-color: var(--accent); }

    .row { display: flex; gap: 15px; flex-wrap: wrap; }
    .col { flex: 1; min-width: 150px; }

    button.action-btn {
        background: var(--accent); color: #000; border: none; padding: 12px 25px;
        border-radius: 8px; font-weight: 800; cursor: pointer; font-size: 0.95rem;
        transition: 0.2s; display: inline-flex; align-items: center; gap: 10px; margin-top: 10px;
        justify-content: center;
    }
    button.action-btn:hover { filter: brightness(1.1); transform: translateY(-2px); }
    button.secondary { background: #222; color: #fff; border: 1px solid #333; }
    button.secondary:hover { border-color: #555; }
    
    /* Buton Grupları */
    .btn-group { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    .btn-group button { flex: 1; margin-top: 0; min-width: 100px; }

    /* --- ÖZEL QR KOD STİLLERİ --- */
    .qr-workspace { display: flex; gap: 40px; align-items: flex-start; flex-wrap: wrap; }
    .qr-options { flex: 1; min-width: 300px; }
    .qr-preview { 
        width: 300px; background: #fff; padding: 20px; border-radius: 20px; 
        display: flex; flex-direction: column; align-items: center; gap: 20px;
        box-shadow: 0 0 30px rgba(255, 165, 0, 0.1); position: sticky; top: 20px;
    }
    #canvas { width: 100%; display: flex; justify-content: center; }

    /* Akordiyon (Collapse) */
    details {
        background: #161616; border: 1px solid #333; border-radius: 8px;
        overflow: hidden; margin-bottom: 10px;
    }
    summary {
        padding: 15px; cursor: pointer; font-weight: bold; color: #fff;
        display: flex; justify-content: space-between; align-items: center;
        list-style: none; transition: 0.2s;
    }
    summary:hover { background: #222; }
    summary::after { content: '+'; font-weight: 900; color: var(--accent); }
    details[open] summary::after { content: '-'; }
    .details-content { padding: 20px; border-top: 1px solid #333; }

    /* Renk Seçici */
    input[type="color"] {
        -webkit-appearance: none; border: none; width: 100%; height: 40px; cursor: pointer;
        background: none; padding: 0; border-radius: 4px;
    }
    .color-row { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }
    .color-row label { margin: 0; flex: 1; font-size: 0.8rem; }
    .color-row input { width: 50px; height: 30px; flex: 0; }

    /* Diğerleri */
    .file-drop {
        border: 2px dashed #333; padding: 40px; text-align: center; border-radius: 12px;
        cursor: pointer; transition: 0.3s; margin-bottom: 20px; color: #666;
    }
    .file-drop:hover { border-color: var(--accent); color: var(--accent); background: rgba(255, 165, 0, 0.05); }
    
    .stats-row { display: flex; gap: 20px; margin-top: 15px; }
    .stat-box {
        background: #1a1a1a; padding: 15px; border-radius: 8px; flex: 1; text-align: center;
        border: 1px solid #333;
    }
    .stat-num { font-size: 2rem; font-weight: 900; color: var(--accent); display: block; }
    #previewImg { max-width: 100%; max-height: 300px; margin-top: 20px; border-radius: 8px; display: none; }
    
    /* Gradyan Aracı */
    .gradient-preview { height: 150px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #333; }
    .code-block { 
        background: #000; padding: 15px; border-radius: 8px; font-family: monospace; 
        color: var(--accent); border: 1px solid #333; word-break: break-all; cursor: pointer;
    }

    /* FOOTER */
    footer {
        text-align: center; padding: 20px; font-size: 0.8rem; color: #444;
        border-top: 1px solid #222; margin-top: auto;
    }

    /* MOBİL */
    @media (max-width: 900px) {
        .sidebar { display: none; }
        .main-content { padding-bottom: 80px; }
        .qr-workspace { flex-direction: column-reverse; }
        .qr-preview { width: 100%; position: static; }
        
        .mobile-nav {
            display: flex; position: fixed; bottom: 0; left: 0; width: 100%;
            background: #111; border-top: 1px solid #222; z-index: 200;
            justify-content: flex-start; padding: 10px 0; overflow-x: auto;
        }
        .nav-item {
            color: #666; text-align: center; font-size: 0.65rem; cursor: pointer;
            min-width: 70px; flex-shrink: 0;
        }
        .nav-item i { display: block; font-size: 1.2rem; margin-bottom: 4px; }
        .nav-item.active { color: var(--accent); }
    }
    @media (min-width: 901px) { .mobile-nav { display: none; } }
</style>
</head>
<body>

    <div class="sidebar">
        <div class="logo-area">ODHUN<span>TOOLS</span></div>
        <div class="menu-list">
            <div class="menu-group-title">Görsel & Medya</div>
            <div class="menu-item active" onclick="showTool('qr')"><i class="fas fa-qrcode"></i> QR Studio</div>
            <div class="menu-item" onclick="showTool('image')"><i class="fas fa-image"></i> Resim Çevirici</div>
            <div class="menu-item" onclick="showTool('gradient')"><i class="fas fa-fill-drip"></i> Gradyan Yapıcı</div>
            
            <div class="menu-group-title">Yazı & Veri</div>
            <div class="menu-item" onclick="showTool('case')"><i class="fas fa-text-height"></i> Metin Dönüştür</div>
            <div class="menu-item" onclick="showTool('list')"><i class="fas fa-list-ol"></i> Liste Düzenle</div>
            <div class="menu-item" onclick="showTool('text')"><i class="fas fa-font"></i> Kelime Sayacı</div>
            <div class="menu-item" onclick="showTool('json')"><i class="fas fa-code"></i> JSON Formatla</div>
            <div class="menu-item" onclick="showTool('base64')"><i class="fas fa-lock"></i> Base64</div>
            <div class="menu-item" onclick="showTool('hash')"><i class="fas fa-fingerprint"></i> Hash Üret</div>
            <div class="menu-item" onclick="showTool('lorem')"><i class="fas fa-paragraph"></i> Lorem Ipsum</div>
            
            <div class="menu-group-title">Yardımcılar</div>
            <div class="menu-item" onclick="showTool('unit')"><i class="fas fa-balance-scale"></i> Birim Çevirici</div>
            <div class="menu-item" onclick="showTool('color')"><i class="fas fa-palette"></i> Renk Seçici</div>
        </div>
        <div style="margin-top: auto; padding: 20px; color: #444; font-size: 0.75rem;">
            Odhun.com © 2025
        </div>
    </div>

    <div class="main-content">

        <div id="tool-qr" class="tool-container active">
            <h2><i class="fas fa-qrcode"></i> QR Tasarım Stüdyosu</h2>
            <p class="desc">Sınırsız özelleştirme seçeneği ile profesyonel QR kodlar oluşturun.</p>
            
            <div class="qr-layout">
                <div class="qr-controls">
                    <details open>
                        <summary>1. İçerik & Veri</summary>
                        <div class="details-content">
                            <div class="input-group">
                                <label>URL veya Metin</label>
                                <input type="text" id="qrData" value="https://odhun.com" oninput="updateQR()">
                            </div>
                            <div class="input-group">
                                <label>Hata Düzeltme (Logo için H seçin)</label>
                                <select id="qrEcc" onchange="updateQR()">
                                    <option value="L">L - Düşük</option>
                                    <option value="M">M - Orta</option>
                                    <option value="Q" selected>Q - Yüksek</option>
                                    <option value="H">H - En Yüksek</option>
                                </select>
                            </div>
                        </div>
                    </details>

                    <details>
                        <summary>2. Renkler & Şekiller</summary>
                        <div class="details-content">
                            <div class="input-group">
                                <label>Nokta Şekli</label>
                                <select id="qrDotsType" onchange="updateQR()">
                                    <option value="square">Kare</option>
                                    <option value="dots">Noktalı</option>
                                    <option value="rounded">Yuvarlak</option>
                                    <option value="classy">Zarif</option>
                                    <option value="classy-rounded">Zarif Yuvarlak</option>
                                    <option value="extra-rounded">Ekstra Yuvarlak</option>
                                </select>
                            </div>
                            <div class="color-row">
                                <label>Ana Renk</label>
                                <input type="color" id="qrColor1" value="#000000" oninput="updateQR()">
                            </div>
                            <div class="color-row">
                                <label>Arka Plan</label>
                                <input type="color" id="qrBgColor" value="#ffffff" oninput="updateQR()">
                            </div>
                        </div>
                    </details>

                    <details>
                        <summary>3. Göz (Köşe) Tasarımı</summary>
                        <div class="details-content">
                            <div class="row">
                                <div class="col input-group">
                                    <label>Dış Çerçeve</label>
                                    <select id="qrCornerSquareType" onchange="updateQR()">
                                        <option value="">Otomatik</option>
                                        <option value="square">Kare</option>
                                        <option value="dot">Nokta</option>
                                        <option value="extra-rounded">Yuvarlatılmış</option>
                                    </select>
                                </div>
                                <div class="col input-group">
                                    <label>İç Nokta</label>
                                    <select id="qrCornerDotType" onchange="updateQR()">
                                        <option value="">Otomatik</option>
                                        <option value="square">Kare</option>
                                        <option value="dot">Nokta</option>
                                    </select>
                                </div>
                            </div>
                            <div class="color-row">
                                <label>Dış Renk</label>
                                <input type="color" id="qrCornerSquareColor" value="#000000" oninput="updateQR()">
                            </div>
                            <div class="color-row">
                                <label>İç Renk</label>
                                <input type="color" id="qrCornerDotColor" value="#000000" oninput="updateQR()">
                            </div>
                        </div>
                    </details>

                    <details>
                        <summary>4. Logo</summary>
                        <div class="details-content">
                            <input type="file" id="qrLogoInput" accept="image/*" onchange="handleLogoUpload(event)" style="margin-bottom:10px;">
                            <button class="action-btn secondary" onclick="clearLogo()">Logoyu Kaldır</button>
                        </div>
                    </details>
                </div>

                <div class="qr-preview">
                    <div id="canvas"></div>
                    <button class="action-btn" onclick="downloadQR()">
                        <i class="fas fa-download"></i> PNG İndir
                    </button>
                </div>
            </div>
        </div>

        <div id="tool-image" class="tool-container">
            <h2><i class="fas fa-image"></i> Resim Çevirici</h2>
            <div class="file-drop" onclick="document.getElementById('fileInput').click()">
                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem;"></i><br>Resim Seçin
                <input type="file" id="fileInput" accept="image/*" style="display: none" onchange="loadImage(event)">
            </div>
            <div class="input-group" id="convertOptions" style="display:none;">
                <label>Hedef Format</label>
                <select id="formatSelect">
                    <option value="image/jpeg">JPG</option>
                    <option value="image/png">PNG</option>
                    <option value="image/webp">WEBP</option>
                </select>
                <img id="previewImg">
                <button class="action-btn" onclick="convertImage()"><i class="fas fa-sync-alt"></i> Dönüştür</button>
            </div>
        </div>

        <div id="tool-gradient" class="tool-container">
            <h2><i class="fas fa-fill-drip"></i> Gradyan Oluşturucu</h2>
            <div class="gradient-preview" id="gradPreview"></div>
            <div class="row">
                <div class="col"><label>Renk 1</label><input type="color" id="gradC1" value="#ffa500" style="width:100%; height:50px;" oninput="updateGradient()"></div>
                <div class="col"><label>Renk 2</label><input type="color" id="gradC2" value="#ff0000" style="width:100%; height:50px;" oninput="updateGradient()"></div>
                <div class="col"><label>Yön</label>
                    <select id="gradDir" onchange="updateGradient()" style="height:50px;">
                        <option value="to right">Sağa</option>
                        <option value="to bottom">Aşağı</option>
                        <option value="to bottom right">Çapraz</option>
                        <option value="circle">Radyal</option>
                    </select>
                </div>
            </div>
            <div style="margin-top:20px;">
                <label>CSS Kodu (Kopyalamak için tıkla)</label>
                <div class="code-block" id="gradCode" onclick="copyText(this)"></div>
            </div>
        </div>

        <div id="tool-case" class="tool-container">
            <h2><i class="fas fa-text-height"></i> Metin Dönüştürücü</h2>
            <textarea id="caseInput" rows="5" placeholder="Metni buraya yazın..."></textarea>
            <div class="btn-group">
                <button class="action-btn secondary" onclick="changeCase('upper')">BÜYÜK HARF</button>
                <button class="action-btn secondary" onclick="changeCase('lower')">küçük harf</button>
                <button class="action-btn secondary" onclick="changeCase('title')">Başlık Hali</button>
                <button class="action-btn secondary" onclick="changeCase('sentence')">Cümle düzeni.</button>
                <button class="action-btn secondary" onclick="changeCase('reverse')">sreT liK</button>
            </div>
        </div>

        <div id="tool-list" class="tool-container">
            <h2><i class="fas fa-list-ol"></i> Liste Düzenleyici</h2>
            <p class="desc">Her satıra bir öğe gelecek şekilde listenizi yapıştırın.</p>
            <textarea id="listInput" rows="8" placeholder="Elma&#10;Armut&#10;Elma&#10;Kiraz"></textarea>
            <div class="btn-group">
                <button class="action-btn" onclick="processList('sortAZ')"><i class="fas fa-sort-alpha-down"></i> A-Z Sırala</button>
                <button class="action-btn" onclick="processList('sortZA')"><i class="fas fa-sort-alpha-up"></i> Z-A Sırala</button>
                <button class="action-btn" onclick="processList('unique')"><i class="fas fa-fingerprint"></i> Tekrarları Sil</button>
                <button class="action-btn" onclick="processList('shuffle')"><i class="fas fa-random"></i> Karıştır</button>
            </div>
        </div>

        <div id="tool-text" class="tool-container">
            <h2><i class="fas fa-font"></i> Kelime Sayacı</h2>
            <textarea id="textInput" rows="8" placeholder="Metni buraya yapıştırın..." oninput="analyzeText()"></textarea>
            <div class="stats-row">
                <div class="stat-box"><span class="stat-num" id="charCount">0</span><span class="stat-label">Karakter</span></div>
                <div class="stat-box"><span class="stat-num" id="wordCount">0</span><span class="stat-label">Kelime</span></div>
            </div>
        </div>

        <div id="tool-json" class="tool-container">
            <h2><i class="fas fa-code"></i> JSON Formatlayıcı</h2>
            <textarea id="jsonInput" rows="8" placeholder='{"ornek":"veri"}' style="font-family:monospace;"></textarea>
            <div class="btn-group">
                <button class="action-btn" onclick="formatJSON(true)">Güzelleştir (Beautify)</button>
                <button class="action-btn secondary" onclick="formatJSON(false)">Sıkıştır (Minify)</button>
            </div>
        </div>

        <div id="tool-base64" class="tool-container">
            <h2><i class="fas fa-lock"></i> Base64 Çevirici</h2>
            <textarea id="b64Input" rows="4"></textarea>
            <div class="row" style="margin-top:10px;">
                <button class="action-btn" onclick="toBase64()">Şifrele</button>
                <button class="action-btn secondary" onclick="fromBase64()">Çöz</button>
            </div>
            <textarea id="b64Output" rows="4" readonly style="color:var(--accent); margin-top:20px;"></textarea>
        </div>

        <div id="tool-hash" class="tool-container">
            <h2><i class="fas fa-fingerprint"></i> Hash Üretici</h2>
            <input type="text" id="hashInput" placeholder="Metni girin..." oninput="generateHash()">
            <div style="margin-top:20px;">
                <label>MD5 (Simüle)</label>
                <input type="text" id="hashMD5" readonly>
                <label style="margin-top:10px;">SHA-1</label>
                <input type="text" id="hashSHA1" readonly>
                <label style="margin-top:10px;">SHA-256</label>
                <input type="text" id="hashSHA256" readonly>
            </div>
        </div>

        <div id="tool-lorem" class="tool-container">
            <h2><i class="fas fa-paragraph"></i> Lorem Ipsum</h2>
            <div class="input-group">
                <label>Paragraf Sayısı</label>
                <input type="number" id="loremCount" value="3" min="1" max="20">
            </div>
            <button class="action-btn" onclick="generateLorem()">Üret</button>
            <textarea id="loremOutput" rows="8" style="margin-top:20px;"></textarea>
        </div>

        <div id="tool-unit" class="tool-container">
            <h2><i class="fas fa-balance-scale"></i> Birim Çevirici</h2>
            <div class="input-group">
                <select id="unitType" onchange="updateUnitUI()">
                    <option value="len">Uzunluk (Metre - Feet)</option>
                    <option value="weight">Ağırlık (Kg - Lb)</option>
                    <option value="temp">Sıcaklık (C - F)</option>
                </select>
            </div>
            <div class="row">
                <div class="col input-group"><label id="unitLabel1">Metre</label><input type="number" id="unitInput" oninput="convertUnit()"></div>
                <div class="col input-group"><label id="unitLabel2">Feet</label><input type="number" id="unitOutput" readonly style="background:#222; color:var(--accent);"></div>
            </div>
        </div>

        <div id="tool-color" class="tool-container">
            <h2><i class="fas fa-palette"></i> Renk Seçici</h2>
            <div class="row" style="align-items: center;">
                <input type="color" id="colorInput" value="#ffa500" style="height:100px; width:100px; border:none; cursor:pointer;" oninput="updateColor()">
                <div style="flex:1; background:#222; padding:20px; border-radius:8px; font-family:monospace; font-size:1.5rem;">
                    <div id="hexVal" style="color:var(--accent)">#FFA500</div>
                    <div id="rgbVal" style="font-size:1rem; color:#888; margin-top:5px;">rgb(255, 165, 0)</div>
                </div>
            </div>
        </div>

        <footer>Odhun.com © 2025 | Gizlilik Odaklı Araçlar</footer>
    </div>

    <div class="mobile-nav">
        <div class="nav-item active" onclick="showTool('qr', this)"><i class="fas fa-qrcode"></i></div>
        <div class="nav-item" onclick="showTool('image', this)"><i class="fas fa-image"></i></div>
        <div class="nav-item" onclick="showTool('gradient', this)"><i class="fas fa-fill-drip"></i></div>
        <div class="nav-item" onclick="showTool('text', this)"><i class="fas fa-font"></i></div>
        <div class="nav-item" onclick="showTool('json', this)"><i class="fas fa-code"></i></div>
        <div class="nav-item" onclick="showTool('unit', this)"><i class="fas fa-balance-scale"></i></div>
        <div class="nav-item" onclick="showTool('color', this)"><i class="fas fa-palette"></i></div>
    </div>

    <script>
        // --- NAVİGASYON ---
        function showTool(toolId, mobileEl) {
            document.querySelectorAll('.tool-container').forEach(el => el.classList.remove('active'));
            document.getElementById('tool-' + toolId).classList.add('active');
            
            document.querySelectorAll('.sidebar .menu-item').forEach(el => el.classList.remove('active'));
            // Basitçe ilgili menüyü aktif yap (Manuel eşleştirme yerine class araması yapılabilir ama bu hızlı çözüm)
            const sidebarLink = document.querySelector(`.sidebar .menu-item[onclick*="'${toolId}'"]`);
            if(sidebarLink) sidebarLink.classList.add('active');

            if (mobileEl) {
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                mobileEl.classList.add('active');
            }
        }

        // --- 1. QR STUDIO ---
        let qrCode, qrLogo = null;
        window.onload = () => {
            qrCode = new QRCodeStyling({
                width: 250, height: 250, data: "https://odhun.com",
                image: "", dotsOptions: { color: "#000", type: "square" },
                backgroundOptions: { color: "#fff" }
            });
            qrCode.append(document.getElementById("canvas"));
            updateGradient(); // Gradyan başlat
        };
        function updateQR() {
            const data = document.getElementById('qrData').value;
            const color = document.getElementById('qrColor1').value;
            const bg = document.getElementById('qrBgColor').value;
            const dots = document.getElementById('qrDotsType').value;
            const csT = document.getElementById('qrCornerSquareType').value;
            const cdT = document.getElementById('qrCornerDotType').value;
            const csC = document.getElementById('qrCornerSquareColor').value;
            const cdC = document.getElementById('qrCornerDotColor').value;
            const ecc = document.getElementById('qrEcc').value;
            const size = document.getElementById('qrLogoSize').value;

            qrCode.update({
                data: data,
                qrOptions: { errorCorrectionLevel: ecc },
                dotsOptions: { color: color, type: dots },
                backgroundOptions: { color: bg },
                cornersSquareOptions: { type: csT || undefined, color: csC },
                cornersDotOptions: { type: cdT || undefined, color: cdC },
                image: qrLogo,
                imageOptions: { imageSize: parseFloat(size), margin: 5 }
            });
        }
        function handleLogoUpload(e) {
            const file = e.target.files[0];
            if(file) { const r = new FileReader(); r.onload = () => { qrLogo = r.result; updateQR(); }; r.readAsDataURL(file); }
        }
        function clearLogo() { qrLogo = null; document.getElementById('qrLogoInput').value = ""; updateQR(); }
        function downloadQR() { qrCode.download({ name: "odhun-qr", extension: document.getElementById('dlFormat').value }); }

        // --- 2. RESİM ---
        let loadedImage = null;
        function loadImage(e) {
            const f = e.target.files[0];
            if(f) { const r = new FileReader(); r.onload = (ev) => { const i = new Image(); i.onload = () => { loadedImage = i; document.getElementById('previewImg').src = ev.target.result; document.getElementById('previewImg').style.display='block'; document.getElementById('convertOptions').style.display='block'; }; i.src = ev.target.result; }; r.readAsDataURL(f); }
        }
        function convertImage() {
            if(!loadedImage) return;
            const c = document.createElement('canvas'); c.width=loadedImage.width; c.height=loadedImage.height;
            c.getContext('2d').drawImage(loadedImage,0,0);
            const fmt = document.getElementById('formatSelect').value;
            const a = document.createElement('a'); a.download = `odhun-image.${fmt.split('/')[1]}`; a.href = c.toDataURL(fmt); a.click();
        }

        // --- 3. GRADYAN ---
        function updateGradient() {
            const c1 = document.getElementById('gradC1').value;
            const c2 = document.getElementById('gradC2').value;
            const dir = document.getElementById('gradDir').value;
            const css = dir === 'circle' ? `radial-gradient(circle, ${c1}, ${c2})` : `linear-gradient(${dir}, ${c1}, ${c2})`;
            document.getElementById('gradPreview').style.background = css;
            document.getElementById('gradCode').innerText = `background: ${css};`;
        }
        function copyText(el) { navigator.clipboard.writeText(el.innerText); alert('Kopyalandı!'); }

        // --- 4. METİN DÖNÜŞTÜR ---
        function changeCase(type) {
            const el = document.getElementById('caseInput');
            const txt = el.value;
            if(type === 'upper') el.value = txt.toUpperCase();
            if(type === 'lower') el.value = txt.toLowerCase();
            if(type === 'reverse') el.value = txt.split('').reverse().join('');
            if(type === 'title') el.value = txt.toLowerCase().split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
            if(type === 'sentence') el.value = txt.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, c => c.toUpperCase());
        }

        // --- 5. LİSTE ---
        function processList(type) {
            const el = document.getElementById('listInput');
            let arr = el.value.split('\n').filter(line => line.trim() !== '');
            if(type === 'sortAZ') arr.sort();
            if(type === 'sortZA') arr.sort().reverse();
            if(type === 'unique') arr = [...new Set(arr)];
            if(type === 'shuffle') arr.sort(() => Math.random() - 0.5);
            el.value = arr.join('\n');
        }

        // --- 7. JSON ---
        function formatJSON(pretty) {
            const el = document.getElementById('jsonInput');
            try { const o = JSON.parse(el.value); el.value = JSON.stringify(o, null, pretty ? 4 : 0); } catch(e) { alert("Geçersiz JSON!"); }
        }

        // --- 8. BASE64 ---
        function toBase64() { document.getElementById('b64Output').value = btoa(unescape(encodeURIComponent(document.getElementById('b64Input').value))); }
        function fromBase64() { try { document.getElementById('b64Output').value = decodeURIComponent(escape(atob(document.getElementById('b64Input').value))); } catch(e){document.getElementById('b64Output').value="Hata";} }

        // --- 9. HASH ---
        async function generateHash() {
            const msg = document.getElementById('hashInput').value;
            const msgBuffer = new TextEncoder().encode(msg);
            
            // SHA-1
            const sha1 = await crypto.subtle.digest('SHA-1', msgBuffer);
            document.getElementById('hashSHA1').value = buf2hex(sha1);
            
            // SHA-256
            const sha256 = await crypto.subtle.digest('SHA-256', msgBuffer);
            document.getElementById('hashSHA256').value = buf2hex(sha256);

            // MD5 (Simple Simulation for Client-Side without library)
            document.getElementById('hashMD5').value = "MD5 tarayıcıda yerel desteklenmez (SHA kullanın)";
        }
        function buf2hex(buffer) { return [...new Uint8Array(buffer)].map(x => x.toString(16).padStart(2, '0')).join(''); }

        // --- 10. LOREM ---
        function generateLorem() {
            const count = document.getElementById('loremCount').value;
            const lorem = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.";
            document.getElementById('loremOutput').value = Array(parseInt(count)).fill(lorem).join('\n\n');
        }

        // --- DİĞER ---
        function analyzeText() {
            const t = document.getElementById('textInput').value;
            document.getElementById('charCount').innerText = t.length;
            document.getElementById('wordCount').innerText = t.trim() === '' ? 0 : t.trim().split(/\s+/).length;
        }
        function updateColor() {
            const c = document.getElementById('colorInput').value;
            document.getElementById('hexVal').innerText = c.toUpperCase();
            document.getElementById('hexVal').style.color = c;
            const r = parseInt(c.substr(1,2),16), g = parseInt(c.substr(3,2),16), b = parseInt(c.substr(5,2),16);
            document.getElementById('rgbVal').innerText = `rgb(${r}, ${g}, ${b})`;
        }
        function updateUnitUI() { convertUnit(); }
        function convertUnit() {
            const t = document.getElementById('unitType').value;
            const v = parseFloat(document.getElementById('unitInput').value);
            const o = document.getElementById('unitOutput');
            const l1=document.getElementById('unitLabel1'), l2=document.getElementById('unitLabel2');
            
            if(t==='len') { l1.innerText="Metre"; l2.innerText="Feet"; o.value=(v*3.28084).toFixed(2); }
            if(t==='weight') { l1.innerText="Kg"; l2.innerText="Lb"; o.value=(v*2.20462).toFixed(2); }
            if(t==='temp') { l1.innerText="°C"; l2.innerText="°F"; o.value=((v*9/5)+32).toFixed(1); }
        }
    </script>

</body>
</html>
