<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odhun TV | Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    
    <style>
        :root {
            --sidebar-width: 260px;
            --bg: #0f0f0f;
            --sidebar-bg: #161616;
            --header-bg: #1a1a1a;
            --accent: #e50914;
            --text: #eee;
            --border: #333;
        }

        body {
            margin: 0; padding: 0; background: var(--bg); color: var(--text);
            font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex;
            overflow: hidden;
        }

        /* --- SOL MENÜ (SIDEBAR) --- */
        .sidebar {
            width: var(--sidebar-width); background: var(--sidebar-bg);
            border-right: 1px solid var(--border); display: flex; flex-direction: column;
            flex-shrink: 0;
        }

        .sidebar-header {
            padding: 15px; border-bottom: 1px solid var(--border);
            background: #111;
        }

        .search-box {
            width: 100%; padding: 8px 10px; background: #222; border: 1px solid #333;
            color: white; border-radius: 4px; outline: none; box-sizing: border-box;
        }
        .search-box:focus { border-color: var(--accent); }

        .channel-list {
            flex: 1; overflow-y: auto; padding: 5px;
        }

        .channel-item {
            padding: 10px 15px; border-bottom: 1px solid #222; cursor: pointer;
            font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between;
            transition: 0.2s; border-radius: 4px; margin-bottom: 2px;
        }
        .channel-item:hover { background: #222; color: #fff; padding-left: 20px; }
        .channel-item i { color: #555; font-size: 0.8rem; }
        .channel-item:hover i { color: var(--accent); }

        /* --- SAĞ TARAF (ANA EKRAN) --- */
        .main-content {
            flex: 1; display: flex; flex-direction: column; height: 100%;
        }

        header {
            height: 50px; background: var(--header-bg); border-bottom: 1px solid var(--border);
            display: flex; align-items: center; padding: 0 15px; gap: 15px;
        }

        .brand { font-weight: 800; font-size: 1.2rem; color: #fff; margin-right: auto; }
        .brand span { color: var(--accent); }

        .controls button {
            background: #222; border: 1px solid #333; color: #aaa;
            padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 0.85rem;
        }
        .controls button:hover, .controls button.active { background: var(--accent); color: white; border-color: var(--accent); }

        #grid {
            flex: 1; display: grid; background: #000;
            grid-template-columns: repeat(3, 1fr); /* Başlangıç 3x3 */
            grid-auto-rows: 1fr; gap: 1px; overflow-y: auto;
        }

        .stream-box {
            position: relative; background: #000; border: 1px solid #222;
            display: flex; align-items: center; justify-content: center; overflow: hidden;
        }

        video, iframe { width: 100%; height: 100%; object-fit: fill; border: none; }

        .label {
            position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.8);
            padding: 3px 8px; border-radius: 3px; font-size: 11px; font-weight: bold;
            pointer-events: none; z-index: 10; border-left: 3px solid var(--accent);
        }

        .close {
            position: absolute; top: 0; right: 0; padding: 5px 10px; background: #c0392b;
            color: white; cursor: pointer; z-index: 20; opacity: 0; transition: 0.2s;
        }
        .stream-box:hover .close { opacity: 1; }

        /* Mobil */
        @media (max-width: 768px) {
            .sidebar { display: none; } /* Mobilde menüyü gizle (veya butonla açılır yapılabilir) */
            #grid { grid-template-columns: 1fr !important; }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="sidebar-header">
            <input type="text" class="search-box" id="search" placeholder="Kanal Ara..." onkeyup="filterChannels()">
        </div>
        <div class="channel-list" id="channelList">
            </div>
    </div>

    <div class="main-content">
        <header>
            <div class="brand">ODHUN<span>TV</span></div>
            
            <div class="controls">
                <button onclick="setGrid(1)">1x1</button>
                <button onclick="setGrid(2)">2x2</button>
                <button onclick="setGrid(3)" class="active">3x3</button>
                <button onclick="setGrid(4)">4x4</button>
                <button onclick="grid.innerHTML=''" style="border-color: #c0392b; color:#c0392b;">Temizle</button>
            </div>
        </header>

        <div id="grid"></div>
    </div>

    <script>
        const grid = document.getElementById('grid');
        const channelListEl = document.getElementById('channelList');

        // --- TAM KANAL LİSTESİ ---
        const channels = [
            // ULUSAL
            { name: "TRT 1", src: "https://trt.daioncdn.net/trt-1/master.m3u8?app=web" },
            { name: "ATV", src: "http://116.202.238.88/ATV_TR/tracks-v1a1/index.m3u8" },
            { name: "Show TV", src: "https://ciner.daioncdn.net/showtv/showtv.m3u8?ce=3&app=4bc856ef-4c68-4a94-bc87-37dfaaa66558" },
            { name: "Star TV", src: "https://raw.githubusercontent.com/ipstreet312/freeiptv/refs/heads/master/ressources/tur/star.m3u8" },
            { name: "Kanal D", src: "http://live.duhnet.tv/S2/HLS_LIVE/kanalddainp/playlist.m3u8" },
            { name: "Now TV", src: "http://116.202.238.88/FOXTV_TR/index.m3u8" },
            { name: "TV8", src: "https://tv8.daioncdn.net/tv8/tv8.m3u8?app=7ddc255a-ef47-4e81-ab14-c0e5f2949788" },
            { name: "TV8.5", src: "https://tv8.daioncdn.net/tv8bucuk/tv8bucuk.m3u8?app=tv8bucuk_web" },
            { name: "Kanal 7", src: "https://kanal7-live.daioncdn.net/kanal7/kanal7.m3u8" },
            { name: "Flash Haber", src: "https://flashhaber-live.ercdn.net/flashhaber/flashhaber.m3u8" },
            { name: "Teve2", src: "http://live.duhnet.tv/S2/HLS_LIVE/teve2np/playlist.m3u8" },
            { name: "DMAX", src: "http://dygvideo.dygdigital.com/live/hls/dmaxdai?m3u8" },
            { name: "TLC", src: "http://dygvideo.dygdigital.com/live/hls/tlctvdai?m3u8" },
            
            // HABER
            { name: "NTV", src: "http://dygvideo.dygdigital.com/live/hls/ntv4puhu?m3u8" },
            { name: "CNN Türk", src: "https://live.duhnet.tv/S2/HLS_LIVE/cnnturknp/playlist.m3u8" },
            { name: "Habertürk", src: "https://tv.ensonhaber.com/haberturk/haberturk.m3u8" },
            { name: "Sözcü TV", src: "https://raw.githubusercontent.com/tecotv2025/tecotv/refs/heads/main/playlist/Sozcu_Tv.m3u8" },
            { name: "Halk TV", src: "https://halktv-live.daioncdn.net/halktv/halktv.m3u8" },
            { name: "Haber Global", src: "https://tv.ensonhaber.com/haberglobal/haberglobal.m3u8" },
            { name: "TV 100", src: "https://tv100-live.daioncdn.net/tv100/tv100_1080p.m3u8" },
            { name: "TRT Haber", src: "https://tv-trthaber.medya.trt.com.tr/master.m3u8" },
            { name: "TGRT Haber", src: "https://canli.tgrthaber.com/tgrt.m3u8" },
            { name: "A Haber", src: "https://raw.githubusercontent.com/UzunMuhalefet/yt-streams/refs/heads/main/TR/dizi/ahaber.m3u8" },
            { name: "Tele 1", src: "https://tele1-live.ercdn.net/tele1/tele1.m3u8" },
            { name: "Ekol TV", src: "https://ekoltv-live.ercdn.net/ekoltv/ekoltv.m3u8" },
            { name: "CNBC-E", src: "https://raw.githubusercontent.com/tecotv2025/tecotv/refs/heads/main/playlist/CNBC_E.m3u8" },
            { name: "Bloomberg HT", src: "https://ciner.daioncdn.net/bloomberght/bloomberght.m3u8" },
            { name: "Ülke TV", src: "https://livetv.radyotvonline.net/kanal7live/ulketv/playlist.m3u8" },
            { name: "24 TV", src: "https://tv.ensonhaber.com/tv24/tv24.m3u8" },
            { name: "TVNET", src: "https://mn-nl.mncdn.com/tvnet/tvnet/playlist.m3u8" },
            { name: "Akit TV", src: "https://akittv-live.ercdn.net/akittv/akittv.m3u8" },
            { name: "Bengütürk", src: "https://tv.ensonhaber.com/benguturk/benguturk.m3u8" },
            { name: "Ulusal Kanal", src: "dK96AZbCns0" }, // YouTube ID'si
            
            // SPOR
            { name: "TRT Spor", src: "http://162.212.179.33:80/dvrfl05/gin-trtspor/playlist.m3u8" },
            { name: "TRT Spor Yıldız", src: "https://tv-trtspor2.medya.trt.com.tr/master.m3u8" },
            { name: "A Spor", src: "https://raw.githubusercontent.com/tecotv2025/tecotv/refs/heads/main/playlist/A_Spor.m3u8" },
            { name: "HT Spor", src: "https://ciner-live.ercdn.net/htspor/htspor.m3u8" },
            { name: "Bein Sports Haber", src: "https://raw.githubusercontent.com/tecotv2025/tecotv/refs/heads/main/playlist/Bein_Spor_Haber.m3u8" },
            { name: "TJK TV", src: "https://tjktv-live.tjk.org/tjktv.m3u8" },

            // DİĞER
            { name: "TRT Belgesel", src: "https://tv-trtbelgesel.medya.trt.com.tr/master.m3u8" },
            { name: "TRT Müzik", src: "https://tv-trtmuzik.medya.trt.com.tr/master.m3u8" },
            { name: "Power TV", src: "https://live.artidijitalmedya.com/artidijital_powertv/powertv/playlist.m3u8" },
            { name: "Powerturk", src: "https://live.artidijitalmedya.com/artidijital_powerturktv/powerturktv/playlist.m3u8" },
            { name: "Number1 TV", src: "https://b01c02nl.mediatriple.net/videoonlylive/mtkgeuihrlfwlive/broadcast_5c9e17cd59e8b.smil/playlist.m3u8" },
            { name: "Kral Pop", src: "https://dogus.daioncdn.net/kralpoptv/kralpoptv.m3u8?app=kralpoptv_web" },
            { name: "Dream Türk", src: "https://live.duhnet.tv/S2/HLS_LIVE/dreamturknp/playlist.m3u8" },
            { name: "TRT Çocuk", src: "https://tv-trtcocuk.medya.trt.com.tr/master.m3u8" },
            { name: "Diyanet TV", src: "https://eustr73.mediatriple.net/videoonlylive/mtikoimxnztxlive/broadcast_5e3bf95a47e07.smil/playlist.m3u8" }
        ];

        window.onload = () => {
            renderSidebar();
            // Açılışta rastgele veya ilk 4 kanalı açalım
            channels.slice(13, 17).forEach(ch => createPlayer(ch));
        };

        // Sidebar'a kanalları doldur
        function renderSidebar() {
            channelListEl.innerHTML = "";
            channels.forEach(ch => {
                const item = document.createElement('div');
                item.className = 'channel-item';
                item.innerHTML = `${ch.name} <i class="fas fa-play"></i>`;
                item.onclick = () => createPlayer(ch);
                channelListEl.appendChild(item);
            });
        }

        // Arama Fonksiyonu
        function filterChannels() {
            const term = document.getElementById('search').value.toLowerCase();
            const items = channelListEl.getElementsByClassName('channel-item');
            Array.from(items).forEach(item => {
                const name = item.innerText.toLowerCase();
                item.style.display = name.includes(term) ? 'flex' : 'none';
            });
        }

        function createPlayer(ch) {
            const box = document.createElement('div');
            box.className = 'stream-box';
            box.innerHTML = `
                <div class="label">${ch.name}</div>
                <div class="close" onclick="this.parentElement.remove()"><i class="fas fa-times"></i></div>
            `;

            let src = ch.src;
            // YouTube ID'si mi yoksa Link mi kontrolü
            // Genelde ID'ler kısa olur ve nokta içermez (istisna olabilir ama basit mantık)
            let isYouTube = !src.includes('/') && !src.includes('.m3u8'); 
            
            // Eğer link http/https ise ve m3u8 içeriyorsa HLS'dir
            let isHLS = src.includes('.m3u8') || src.startsWith('http');

            if (isHLS) {
                const video = document.createElement('video');
                video.muted = true; video.autoplay = true; 
                video.playsInline = true; video.controls = true; 
                box.appendChild(video);

                if (Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(src);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (e, data) => {
                        if(data.fatal) hls.startLoad();
                    });
                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    video.src = src;
                }
            } else {
                // YouTube Embed
                const iframe = document.createElement('iframe');
                iframe.src = `https://www.youtube.com/embed/${src}?autoplay=1&mute=1&controls=1`;
                iframe.allow = "autoplay; encrypted-media; picture-in-picture";
                box.appendChild(iframe);
            }

            grid.appendChild(box);
        }

        function setGrid(n) {
            grid.style.gridTemplateColumns = `repeat(${n}, 1fr)`;
            document.querySelectorAll('.controls button').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
